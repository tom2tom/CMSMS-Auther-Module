/*!
 * Strengthify - determine password-strength using zxcvbn
 * https://github.com/MorrisJobke/strengthify
 * Author: Morris Jobke (github.com/MorrisJobke) - original
 *         Eve Ragins @ Eve Corp (github.com/eve-corp)
 *
 * v 0.5.2
 *
 * Released under the MIT License
 */
(function($){$.fn.strengthify=function(a){"use strict";var b={zxcvbn:"zxcvbn/zxcvbn.js",titles:["Weakest","Weak","So-so","Good","Perfect"],messages:["Getting better.","Looks good."],tilesOptions:{tooltip:true,element:false},drawTitles:false,drawMessage:false,drawBars:true};return this.each(function(){var d=$.extend(b,a);if(!d.drawTitles&&!d.drawMessage&&!d.drawBars){console.warn("expect at least one of 'drawTitles', 'drawMessage', or 'drawBars' to be true")}function c(g){return $('div[data-strengthifyFor="'+g+'"]')}function f(){var m=$(this).val(),g=$(this).attr("id"),l=(m==="")?0:1,p=zxcvbn(m),j="",h="",o="",k=c(g),n=k.find(".strengthify-container"),i=k.find("[data-strengthifyMessage]");k.children().css("opacity",l).css("-ms-filter",'"progid:DXImageTransform.Microsoft.Alpha(Opacity='+l*100+')"');switch(p.score){case 0:case 1:j="password-bad";h="danger";o=p.feedback?p.feedback.suggestions.join("<br/>"):"";break;case 2:j="password-medium";h="warning";o=p.feedback?p.feedback.suggestions.join("<br/>"):"";break;case 3:j="password-good";h="info";o=d.messages[0];case 4:j="password-good";h="success";o=d.messages[1];break}if(i){i.removeAttr("class");i.addClass("bg-"+h);if(m===""){o=""}i.html(o)}if(n){n.attr("class",j+" strengthify-container").css("width",((p.score===0?1:p.score)*25)+"%");if(m===""){n.css("width",0)}}if(d.drawTitles){if(d.tilesOptions.tooltip){k.attr("title",d.titles[p.score]).tooltip({placement:"bottom",trigger:"manual"}).tooltip("fixTitle").tooltip("show");if(l===0){k.tooltip("hide")}}if(d.tilesOptions.element){k.find(".strengthify-tiles").text(d.titles[p.score])}}}function e(){var i=$(this),j=i.attr("id"),h=i.outerWidth(false);var g=f.bind(this);i.after('<div class="strengthify-wrapper" data-strengthifyFor="'+j+'" style="width:'+h+'px;margin-bottom:5px"></div>');if(d.drawBars){c(j).append('<div class="strengthify-bg" />').append('<div class="strengthify-container" />').append('<div class="strengthify-separator" style="left: 25%" />').append('<div class="strengthify-separator" style="left: 50%" />').append('<div class="strengthify-separator" style="left: 75%" />')}if(d.drawMessage){c(j).append("<div data-strengthifyMessage></div>")}if(d.drawTitles&&d.tilesOptions){c(j).append('<div class="strengthify-tiles"></div>')}i.parent().on("scroll",g);$.ajax({cache:true,dataType:"script",url:d.zxcvbn}).done(function(){i.bind("keyup input change",g)})}e.call(this)})}}(jQuery));